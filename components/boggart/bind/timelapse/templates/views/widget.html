{{ define "content" }}
<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="x_content">
                {{ if .files }}
                {{ block "paginator" . }} {{ end }}
                <div class="row">
                    {{ range $file := .files }}
                    <div class="col-sm-6 col-md-4">
                        <div class="thumbnail">
                            <img style="width: 100%; display: block;" src="?action=thumbnail&file={{ $file.Name }}" alt="image" />
                            <div class="caption text-center">
                                <h3>{{ $file.Name }}</h3>
                                <p>{{ human_bytes $file.Size }}</p>
                                <p><a href="?action=download&file={{ $file.Name }}" class="btn btn-primary" role="button">{{ i18n "Download" $ }}</a></p>
                            </div>
                        </div>
                    </div>
                    {{ end }}
                </div>
                {{ block "paginator" . }} {{ end }}
                {{ end }}
            </div>
        </div>
    </div>
</div>
{{ end }}

{{ define "paginator" }}
<div class="row text-center">
    <nav aria-label="Page navigation">
        <ul class="pagination">
        {{ if gt .page 1 }}
            <li><a href="?page=1" aria-label="First"><span aria-hidden="true">&laquo;</span></a></li>
        {{ end }}

        {{ range $n := untilStep (int (sub .page 3)) (int (add .page 4)) 1 }}
            {{ if and (gt $n 0) (le $n $.pages) }}
                {{ if eq $.page $n }}
                    <li class="active"><span>{{ $n }}</span></li>
                {{ else }}
                    <li><a href="?page={{ $n }}">{{ $n }}</a></li>
                {{ end }}
            {{ end }}
        {{ end }}

        {{ if lt (add .page 1) .pages }}
            <li><a href="?page={{ .pages }}" aria-label="Last"><span aria-hidden="true">&raquo;</span></a></li>
        {{ end }}
        </ul>
    </nav>
</div>
{{ end }}

{{ define "head" }}
<style type="text/css">
    .thumbnail {
        height: auto;
    }
</style>
{{ end }}