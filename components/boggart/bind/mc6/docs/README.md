Все нижеописанное работает со стоковой прошивкой P2.31E

Коды
====

| Код  | Описание                                    |
|------|---------------------------------------------|
| 1976 | Установка mqtt сервера                      |
| 3036 | Установка протокола взаимодействия (modbus) |

Есть несколько режимов подключения для смены через 3036 код

| Тип             | Описание                                                                                                                                                                                                                                     |
|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Wifi Cloud      | Использует китайский внешний сервис для соединения (MQTT)                                                                                                                                                                                    |
| Wifi Modbus TCP | Установка протокола взаимодействия (modbus) при этом например использование китайского сервиса отключается, таким образом смена сервиса через 1976 не будет иметь эффекта, так как устройство работает исключительно по modbus в этом режиме |

MQTT
====
Чтобы подключить собственный сервер необходимо
* через команду 3036 выбрать режим Wifi Cloud
* через команду 1976 установить адрес своего mqtt сервера
* по умолчанию устройство использует логин/пароль admin/admin для доступак mqtt серверу, его сменить можно только через прошивку, но этот вариант я не пробывал
* все сообщения в mqtt закодированы и приходят от устройства в топик **{mac}** и подписка слушается в топике **temprx/{mac}**
* ключ шифрования для данных, которые отправляются в китайское облако: **www.brande.commc6mqtt_aes256ecb7**

Как задать корректно свой ключ шифрования
* Он должен быть строго 32 байта
* Иметь постфикс **aes256ecb7** все что до этого постфикса - считается доменом
* Если домен не будет резолвится в локальный сервер mqtt девайс автоматически перейдет на китайское облако